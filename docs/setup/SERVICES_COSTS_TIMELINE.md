# 💰 Стоимость и сроки настройки сервисов

**Дата:** 10 ноября 2025

---

## 📊 Обзор затрат

### Единоразовые платежи

| Сервис | Стоимость | Когда |
|--------|-----------|-------|
| Domain (hummii.ca) | ~$15-20 CAD | Ежегодно |
| Apple Developer | $99 USD/год | Опционально |
| **ИТОГО** | **~$15-120/год** | |

### Ежемесячные затраты - Development

| Сервис | План | Стоимость |
|--------|------|-----------|
| **1Password** | Family/Team | $5-20/мес |
| **Cloudflare** | Free | $0 |
| **Stripe** | Test Mode | $0 |
| **SendGrid** | Free | $0 (до 100 emails/день) |
| **DigitalOcean** | 2GB Droplet | $12/мес |
| **Google Cloud** | Free Tier | $0 (первые $300 кредит) |
| **Sentry** | Developer | $0 (до 5k errors) |
| **OneSignal** | Free | $0 |
| **Twilio** | Pay-as-you-go | ~$1-5/мес |
| **ИТОГО** | | **~$18-37/мес** |

### Ежемесячные затраты - Production (Минимум)

| Сервис | План | Стоимость |
|--------|------|-----------|
| **1Password** | Team | $8-20/мес |
| **Cloudflare** | Free → Pro | $0-20/мес |
| **Stripe** | Live Mode | 2.9% + $0.30/транзакция |
| **SendGrid** | Essentials | $20/мес (50k emails) |
| **DigitalOcean** | 4GB Droplet | $24/мес |
| **Google Cloud** | Maps API | ~$50/мес* |
| **Sentry** | Team | $26/мес |
| **OneSignal** | Free | $0 |
| **Twilio** | SMS | ~$10-20/мес |
| **ИТОГО** | | **~$138-170/мес** |

*Google Maps: $200 месячный кредит, обычно этого достаточно для начала

### Ежемесячные затраты - Production (Рост)

| Сервис | План | Стоимость |
|--------|------|-----------|
| **1Password** | Business | $20/мес |
| **Cloudflare** | Pro/Business | $20-200/мес |
| **Stripe** | Volume pricing | 2.7% + $0.30/транзакция |
| **SendGrid** | Pro | $90/мес (100k emails) |
| **DigitalOcean** | 8GB + LB | $60/мес |
| **Google Cloud** | Maps + OAuth | ~$200/мес |
| **Sentry** | Business | $80/мес |
| **OneSignal** | Growth | $99/мес |
| **Twilio** | SMS | ~$50-100/мес |
| **AWS S3** | Storage | ~$10-30/мес |
| **ИТОГО** | | **~$629-899/мес** |

---

## ⏱️ Время на настройку

### Phase 1: Регистрация аккаунтов (1-2 дня)

| Сервис | Время | Сложность | Верификация |
|--------|-------|-----------|-------------|
| 1Password | 15 мин | 🟢 Простая | Мгновенная |
| Cloudflare | 30 мин | 🟡 Средняя | 2-48 часов (DNS) |
| Stripe | 1-2 часа | 🟡 Средняя | 1-7 дней (банк) |
| SendGrid | 30 мин | 🟢 Простая | 24-48 часов (domain) |
| DigitalOcean | 30 мин | 🟢 Простая | Мгновенная |
| Google Cloud | 1 час | 🟡 Средняя | Мгновенная |
| **ИТОГО** | **4-5 часов** | | |

### Phase 2: Настройка сервисов (2-3 дня)

| Задача | Время | Зависимости |
|--------|-------|-------------|
| 1Password: структура | 30 мин | - |
| Cloudflare: DNS записи | 1 час | Активация домена |
| Cloudflare: SSL/TLS | 30 мин | DNS |
| Stripe: Products | 1 час | - |
| Stripe: Webhooks | 30 мин | Развёртывание сервера |
| SendGrid: Templates | 1 час | Domain auth |
| Google Cloud: APIs | 1 час | - |
| Google Cloud: OAuth | 30 мин | Redirect URIs |
| Sentry: Setup | 30 мин | - |
| **ИТОГО** | **7 часов** | |

### Phase 3: Развёртывание сервера (1 день)

| Задача | Время | Примечание |
|--------|-------|------------|
| Создание сервера | 15 мин | DigitalOcean Droplet |
| Установка Docker | 30 мин | + Docker Compose |
| SSL сертификаты | 30 мин | Let's Encrypt |
| Firewall | 15 мин | UFW |
| .env конфигурация | 1 час | Из 1Password |
| Build & Deploy | 30 мин | docker compose |
| Миграции БД | 15 мин | Prisma |
| **ИТОГО** | **3-4 часа** | |

### Phase 4: Тестирование (1 день)

| Тест | Время | Критичность |
|------|-------|-------------|
| DNS propagation | Проверка | 🔴 Критично |
| SSL работает | 15 мин | 🔴 Критично |
| API health check | 15 мин | 🔴 Критично |
| Регистрация user | 30 мин | 🔴 Критично |
| Email доставка | 30 мин | 🔴 Критично |
| Google OAuth | 30 мин | 🔴 Критично |
| Тестовый платёж | 30 мин | 🔴 Критично |
| Maps отображение | 15 мин | 🔴 Критично |
| Sentry errors | 15 мин | 🟡 Важно |
| Load testing | 1 час | 🟢 Опционально |
| **ИТОГО** | **4-5 часов** | |

---

## 📅 Полный timeline

### Оптимистичный сценарий (5 дней)

```
День 1: Регистрация всех аккаунтов (4-5 часов)
  ✅ 1Password, Cloudflare, Stripe, SendGrid
  ✅ DigitalOcean, Google Cloud, Sentry
  ⏳ Ожидание верификации Stripe (фоном)

День 2: Настройка Cloudflare & Google (4 часа)
  ✅ DNS записи
  ✅ SSL/TLS конфигурация
  ✅ Google Maps APIs
  ✅ OAuth 2.0 setup
  ⏳ Ожидание DNS propagation (фоном)

День 3: Stripe & SendGrid (4 часа)
  ✅ Stripe Products
  ✅ SendGrid Domain Auth
  ✅ Email Templates
  ✅ API keys в 1Password

День 4: Развёртывание (4 часа)
  ✅ Создание & настройка сервера
  ✅ Docker setup
  ✅ SSL сертификаты
  ✅ Deploy приложения

День 5: Тестирование & Launch (5 часов)
  ✅ Все интеграции
  ✅ E2E тесты
  ✅ Документация
  🚀 PRODUCTION READY!
```

**ИТОГО: 5 дней, ~21-23 часа работы**

### Реалистичный сценарий (7-10 дней)

```
Неделя 1:
  День 1-2: Регистрация аккаунтов
  День 3-4: Cloudflare + DNS (ожидание propagation)
  День 5: Google Cloud setup

Неделя 2:
  День 6: Stripe (ожидание верификации банка)
  День 7: SendGrid (ожидание domain auth)
  День 8: Развёртывание сервера
  День 9: Тестирование
  День 10: Багфиксы + Launch
```

**ИТОГО: 10 дней** (с учётом времени ожидания верификаций)

---

## 🎯 Приоритизация по времени

### Можно сделать параллельно:

```
┌─────────────────────────────────────────────┐
│ ГРУППА A (День 1)                           │
├─────────────────────────────────────────────┤
│ ✅ 1Password - 15 мин                        │
│ ✅ Cloudflare - 30 мин                       │
│ ✅ DigitalOcean - 30 мин                     │
│ ✅ Google Cloud - 1 час                      │
│ ✅ Sentry - 30 мин                           │
└─────────────────────────────────────────────┘
        ↓ Ожидание: DNS propagation

┌─────────────────────────────────────────────┐
│ ГРУППА B (День 2-3)                         │
├─────────────────────────────────────────────┤
│ ✅ Stripe (требует банк) - 2 часа           │
│ ✅ SendGrid (требует DNS) - 2 часа          │
└─────────────────────────────────────────────┘
        ↓ Ожидание: Верификации

┌─────────────────────────────────────────────┐
│ ГРУППА C (День 4-5)                         │
├─────────────────────────────────────────────┤
│ ✅ Развёртывание сервера - 4 часа           │
│ ✅ Тестирование - 5 часов                   │
└─────────────────────────────────────────────┘
```

---

## 💡 Советы по оптимизации времени

### 🚀 Ускорители

1. **Начните с DNS сразу:**
   - Cloudflare первым делом
   - DNS propagation идёт фоном (до 48ч)

2. **Параллельная регистрация:**
   - Откройте несколько вкладок
   - Зарегистрируйте все аккаунты за 1 заход

3. **Подготовьте данные:**
   - Банковская информация (Stripe)
   - Email для верификации
   - Credit card для trial credits

4. **Используйте 1Password CLI:**
   ```bash
   op create item --category=login --title="Stripe" \
     --vault="Hummii" --fields="username=...,password=..."
   ```

5. **Automation scripts:**
   - Скрипт для копирования .env переменных
   - Docker compose для быстрого deployment

### 🐌 Узкие места (где ждать)

| Что | Время ожидания | Решение |
|-----|----------------|---------|
| DNS propagation | 2-48 часов | Начать в первый день |
| Stripe verification | 1-7 дней | Заполнить сразу всё |
| SendGrid domain auth | 24-48 часов | Добавить DNS быстро |
| SSL certificates | Мгновенно | Let's Encrypt |
| Google Cloud approval | Мгновенно | - |

---

## 📊 ROI (Return on Investment)

### Стоимость vs. Альтернатива

**Вариант 1: Полная настройка (рекомендуется)**
- Стоимость: ~$170/мес
- Время: 5-10 дней
- Плюсы: Полный контроль, масштабируемость
- Минусы: Требует технических знаний

**Вариант 2: PaaS решения (Vercel/Railway/Render)**
- Стоимость: ~$100-200/мес
- Время: 2-3 дня
- Плюсы: Проще
- Минусы: Меньше контроля, дороже при росте

**Вариант 3: Managed services (AWS Amplify/Firebase)**
- Стоимость: ~$300-500/мес
- Время: 1 день
- Плюсы: Очень быстро
- Минусы: Vendor lock-in, дорого

### Экономия при росте

```
При 1000 пользователей:
- Вариант 1: ~$300/мес
- Вариант 2: ~$500/мес
- Вариант 3: ~$1000/мес

Экономия вариант 1 vs 3: $8400/год!
```

---

## ✅ Быстрый чеклист

### Сегодня (2 часа)
```
□ Зарегистрировать 1Password
□ Зарегистрировать Cloudflare
□ Добавить домен в Cloudflare
□ Обновить nameservers у регистратора
□ Зарегистрировать DigitalOcean
```

### Завтра (3 часа)
```
□ Проверить DNS propagation
□ Зарегистрировать Stripe
□ Зарегистрировать SendGrid
□ Зарегистрировать Google Cloud
□ Настроить DNS записи в Cloudflare
```

### Послезавтра (4 часа)
```
□ Stripe: создать Products
□ SendGrid: domain authentication
□ Google: включить APIs
□ Google: OAuth 2.0
□ Sentry: создать проект
```

### Через 3 дня (4 часа)
```
□ Создать Droplet на DigitalOcean
□ Установить Docker
□ Получить SSL сертификаты
□ Deploy приложения
□ Запустить миграции
```

### Через 4 дня (5 часов)
```
□ Тестирование всех интеграций
□ Исправление багов
□ Финальная проверка безопасности
□ 🚀 LAUNCH!
```

---

## 📞 Поддержка

Если нужна помощь с настройкой:

- **Community форумы:** (бесплатно)
  - DigitalOcean Community
  - Stripe Discord
  - NestJS Discord

- **Paid support:**
  - Stripe: включена в plan
  - SendGrid: email support
  - DigitalOcean: $50-100/мес premium support

- **Консультация:** 
  - DevOps специалист: ~$100-200/час
  - Полная настройка: ~$1000-2000

---

## 🎓 Обучение

Если это первый опыт с этими сервисами:

**Добавить время на обучение:**
- Cloudflare: +2 часа
- Stripe: +3 часа
- Docker/DevOps: +5 часов
- **ИТОГО: +10 часов**

**Ресурсы:**
- [Cloudflare Learning Center](https://www.cloudflare.com/learning/)
- [Stripe Docs](https://stripe.com/docs)
- [Docker Tutorial](https://docs.docker.com/get-started/)

---

**Последнее обновление:** 10 ноября 2025

**Готовы начать?** Следуйте [полному руководству](./SERVICES_SETUP_GUIDE.md)!
